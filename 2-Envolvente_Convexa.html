<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Envolvente Convexa</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #111;
      color: #eee;
      margin: 0 auto;
      max-width: 900px;
      padding: 1rem 2rem;
      line-height: 1.6;
      position: relative;
      overflow-x: hidden;
    }

    /* GIF esquina superior izquierda */
    #gif-top-left {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      opacity: 0.07;
      z-index: -1;
      pointer-events: none;
    }

    /* GIF esquina superior derecha */
    #gif-top-right {
      position: fixed;
      top: 0;
      right: 0;
      width: 250px;
      opacity: 0.07;
      z-index: -1;
      pointer-events: none;
    }

    /* GIF esquina inferior izquierda */
    #gif-bottom-left {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 250px;
      opacity: 0.07;
      z-index: -1;
      pointer-events: none;
    }

    /* GIF esquina inferior derecha */
    #gif-bottom-right {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 250px;
      opacity: 0.07;
      z-index: -1;
      pointer-events: none;
    }

    a {
      color: #4ea8ff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    h1, h2 {
      font-weight: 400;
      border-bottom: 1px solid #444;
      padding-bottom: 0.5rem;
      margin-top: 2rem;
    }
    pre {
      background: #222;
      padding: 1rem;
      overflow-x: auto;
      border-radius: 6px;
      font-family: Consolas, 'Courier New', monospace;
      font-size: 0.9rem;
      color: #d1d1d1;
      margin-top: 1rem;
    }
    .code-section {
      margin-top: 1rem;
      border-left: 4px solid #4ea8ff;
      padding-left: 1rem;
    }
    .notebook-link {
      margin-top: 1rem;
      display: inline-block;
      background: #4ea8ff;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      transition: background 0.3s ease;
    }
    .notebook-link:hover {
      background: #367acc;
    }
    nav {
      margin-bottom: 2rem;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">← Volver a la página principal</a>
  </nav>

  <!-- GIFs en las esquinas -->
  <img id="gif-top-left" src="https://phoneky.co.uk/thumbs/screensavers/down/abstract/abstracto_h10If0AI.gif" alt="GIF esquina superior izquierda" />
  <img id="gif-top-right" src="https://i.pinimg.com/originals/00/f0/0e/00f00e72d99f9afc4990a4f0f47bc3af.gif" alt="GIF esquina superior derecha" />
  <img id="gif-bottom-left" src="https://i.pinimg.com/originals/1f/ce/82/1fce82cdace04ac469160cbbe594f58c.gif" alt="GIF esquina inferior izquierda" />
  <img id="gif-bottom-right" src="https://i.makeagif.com/media/2-27-2018/xxu5uk.gif" alt="GIF esquina inferior derecha" />

  <section id="envolvente-convexa" style="margin: 2rem 0;">

  <h3 style="font-size: 1.6rem; color: #fff; border-bottom: 1px solid #444; padding-bottom: 0.5rem; margin-top: 1.5rem;">
    Envolvente Convexa
  </h3>
  <div style="text-align: justify; color: #ddd; line-height: 1.6; margin-top: 0.5rem;">
    <p>
      La envolvente convexa de un conjunto de puntos en el plano es la frontera poligonal más pequeña que encierra todos los vértices, definiendo así el contorno del conjunto. En esta sección se exploran dos estrategias para construir dicho contorno de manera dinámica, ilustrando cada paso mediante animaciones que muestran cómo se incorporan o descartan puntos hasta completar la frontera.
    </p>
    <ul style="margin-left:1.5rem; list-style-type:disc;">
      <li><strong>Graham Scan:</strong> Se parte de un pivote (el punto de coordenada mínima en y) y se ordena el resto según su ángulo polar respecto a él. A medida que se recorre esta lista, se mantiene una pila de vértices que definen el contorno parcial. Cada nuevo punto es comparado con los dos últimos de la pila mediante un test de orientación; si forma un giro hacia dentro, el vértice intermedio es desapilado, garantizando que la frontera permanezca convexa.</li>
      <li><strong>Quickhull:</strong> Se identifican dos puntos extremos (el de mínima x y el de máxima x) y se traza el segmento que los une, dividiendo el conjunto en los situados por encima y por debajo de esa línea. Para cada subconjunto, se selecciona el punto más alejado de la base como nuevo vértice de la envolvente y se generan dos subproblemas recursivos sobre los triángulos formados, hasta cerrar el polígono.</li>
    </ul>
  </div>
</section>
  

  <!-- Ejemplo de código + Icosaedro interactivo -->
  <section>
    <h2>Código Icosaedro</h2>
    <div class="code-section">
      <pre><code class="language-python">
import numpy as np, plotly.graph_objects as go
from IPython.display import HTML

phi = (1 + 5**.5) / 2
verts = np.array([
    [x,y,z] for x,y,z in [
      (-1,phi,0),(1,phi,0),(-1,-phi,0),(1,-phi,0),
      (0,-1,phi),(0,1,phi),(0,-1,-phi),(0,1,-phi),
      (phi,0,-1),(phi,0,1),(-phi,0,-1),(-phi,0,1)
    ]
]) / np.linalg.norm([-1,phi,0])

faces = [
  (0,11,5),(0,5,1),(0,1,7),(0,7,10),(0,10,11),
  (1,5,9),(5,11,4),(11,10,2),(10,7,6),(7,1,8),
  (3,9,4),(3,4,2),(3,2,6),(3,6,8),(3,8,9),
  (4,9,5),(2,4,11),(6,2,10),(8,6,7),(9,8,1)
]
i,j,k = zip(*faces)

fig = go.Figure(go.Mesh3d(
    x=verts[:,0], y=verts[:,1], z=verts[:,2],
    i=i, j=j, k=k,
    opacity=.8, colorscale='Viridis', intensity=verts[:,2],
    flatshading=True, showscale=False,
    lighting=dict(ambient=.6, diffuse=.6, roughness=.9, specular=.5),
    lightposition=dict(x=100, y=200, z=0)
))
fig.update_layout(
    scene=dict(
      xaxis_visible=False, yaxis_visible=False, zaxis_visible=False,
      aspectmode='data', camera_eye=dict(x=1.5, y=1.5, z=1.5)
    ),
    margin=dict(l=0, r=0, b=0, t=0),
    paper_bgcolor='black',
    template='plotly_dark'
)
fig.show()
      </code></pre>
    </div>
  </section>
  
<section>
<!-- Sección de Envolvente Convexa Dinámica Avanzada -->
<section style="margin: 2rem 0;">
  <h2 style="font-size:1.8rem; color:#fff; border-bottom:1px solid #444; padding-bottom:0.5rem;">
    Envolvente Convexa Dinámica Avanzada
  </h2>
  <div id="hull-animation" style="width:100%; height:600px;"></div>
</section>

<!-- Plotly.js -->
<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
<script>
// 1) Generar puntos aleatorios
const N = 200;
const pts = Array.from({length: N}, () => [Math.random()*200, Math.random()*200]);

// 2) Ordenar lexicográficamente por x,y
pts.sort((a,b) => a[0]===b[0] ? a[1]-b[1] : a[0]-b[0]);

// 3) Algoritmo incremental para la convex hull
function incrementalHull(points) {
  const cross = (o,a,b) => (a[0]-o[0])*(b[1]-o[1]) - (a[1]-o[1])*(b[0]-o[0]);
  let lower = [], upper = [], steps = [];
  for (let p of points) {
    lower.push(p);
    while (lower.length>=3 && cross(lower[lower.length-3], lower[lower.length-2], lower[lower.length-1]) <= 0) {
      lower.splice(lower.length-2, 1);
    }
    steps.push(lower.slice());
  }
  for (let p of points.slice().reverse()) {
    upper.push(p);
    while (upper.length>=3 && cross(upper[upper.length-3], upper[upper.length-2], upper[upper.length-1]) <= 0) {
      upper.splice(upper.length-2, 1);
    }
    let full = lower.concat(upper.slice(1,-1));
    steps.push(full);
  }
  return steps;
}

const hullSteps = incrementalHull(pts);

// 4) Construir frames para Plotly
const frames = hullSteps.map(hull => {
  const hx = hull.map(p=>p[0]).concat(hull.length? [hull[0][0]]:[]);
  const hy = hull.map(p=>p[1]).concat(hull.length? [hull[0][1]]:[]);
  return {
    name: `${Math.random()}`,  // nombre único
    data: [
      { x: pts.map(p=>p[0]), y: pts.map(p=>p[1]), mode:'markers',
        marker:{size:6, color:'#4ea8ff'}, name:'Puntos' },
      { x: hx, y: hy, mode:'lines+markers',
        line:{width:2, color:'#fde725'},
        marker:{size:5, color:'#fde725'}, name:'Hull' }
    ]
  };
});

// 5) Layout sin botones, con fondo oscuro
const layout = {
  margin: {l:0,r:0,b:0,t:0},
  paper_bgcolor: 'black',
  plot_bgcolor: 'black',
  xaxis:{visible:false}, yaxis:{visible:false},
  scene: {},  // no es 3D
  template:'plotly_dark',
  height:600
};

// 6) Plot y auto-animación en bucle
Plotly.newPlot('hull-animation', frames[0].data, layout)
  .then(() => {
    Plotly.addFrames('hull-animation', frames);
    Plotly.animate('hull-animation', null, {
      frame: { duration: 100, redraw: true },
      transition: { duration: 0 },
      mode: 'immediate',
      loop: true
    });
  });
</script>

</section>





























  

  <section>
    <h2>Notebook Colab</h2>
    <a class="notebook-link" href="https://drive.google.com/file/d/1gXrX_LXKCNomgd-4YG2689g1UsomNxK6/view?usp=sharing" target="_blank" rel="noopener noreferrer">
      Abrir notebook en Colab
    </a>
  </section>
</body>
</html>
